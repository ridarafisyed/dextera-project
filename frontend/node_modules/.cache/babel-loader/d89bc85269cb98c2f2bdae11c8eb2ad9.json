{"ast":null,"code":"import _regeneratorRuntime from\"/home/supersis03/Projects/dextera-project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/supersis03/Projects/dextera-project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import{LOGIN_SUCCESS,LOGIN_FAIL,USER_LOADED_SUCCESS,USER_LOADED_FAIL,AUTHENTICATED_SUCCESS,AUTHENTICATED_FAIL,PASSWORD_RESET_SUCCESS,PASSWORD_RESET_FAIL,PASSWORD_RESET_CONFIRM_SUCCESS,PASSWORD_RESET_CONFIRM_FAIL,SIGNUP_SUCCESS,SIGNUP_FAIL,ACTIVATION_SUCCESS,ACTIVATION_FAIL,GOOGLE_AUTH_SUCCESS,GOOGLE_AUTH_FAIL,FACEBOOK_AUTH_SUCCESS,FACEBOOK_AUTH_FAIL,LOGOUT}from'./types';export var load_user=function load_user(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var config,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!localStorage.getItem('access')){_context.next=15;break;}config={headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem('access')),'Accept':'application/json'}};_context.prev=2;_context.next=5;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/users/me/\"),config);case 5:res=_context.sent;console.log('res.data load user :',res.data);dispatch({type:USER_LOADED_SUCCESS,payload:res.data});_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](2);dispatch({type:USER_LOADED_FAIL});case 13:_context.next=16;break;case 15:dispatch({type:USER_LOADED_FAIL});case 16:case\"end\":return _context.stop();}}},_callee,null,[[2,10]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var checkAuthenticated=function checkAuthenticated(){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var config,body,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!localStorage.getItem('access')){_context2.next=15;break;}config={headers:{'Content-Type':'application/json','Accept':'application/json'}};body=JSON.stringify({token:localStorage.getItem('access')});_context2.prev=3;_context2.next=6;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/jwt/verify/\"),body,config);case 6:res=_context2.sent;if(res.data.code!=='token_not_valid'){dispatch({type:AUTHENTICATED_SUCCESS});}else{dispatch({type:AUTHENTICATED_FAIL});}_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](3);dispatch({type:AUTHENTICATED_FAIL});case 13:_context2.next=16;break;case 15:dispatch({type:AUTHENTICATED_FAIL});case 16:case\"end\":return _context2.stop();}}},_callee2,null,[[3,10]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var login=function login(email,password){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var config,body,res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:config={headers:{'Content-Type':'application/json'}};body=JSON.stringify({email:email,password:password});_context3.prev=2;_context3.next=5;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/jwt/create/\"),body,config);case 5:res=_context3.sent;dispatch({type:LOGIN_SUCCESS,payload:res.data});dispatch(load_user());_context3.next=13;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](2);dispatch({type:LOGIN_FAIL});case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[2,10]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export var signup=function signup(email,first_name,last_name,username,password,re_password,is_firm,is_client){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var is_lawyer,config,body,res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:is_lawyer=false;config={headers:{'Content-Type':'application/json'}};body=JSON.stringify({email:email,first_name:first_name,last_name:last_name,username:username,password:password,re_password:re_password,is_firm:is_firm,is_lawyer:is_lawyer,is_client:is_client});_context4.prev=3;_context4.next=6;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/users/\"),body,config);case 6:res=_context4.sent;dispatch({type:SIGNUP_SUCCESS,payload:res.data});_context4.next=13;break;case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](3);dispatch({type:SIGNUP_FAIL});case 13:case\"end\":return _context4.stop();}}},_callee4,null,[[3,10]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();};export var verify=function verify(uid,token){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var config,body;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:config={headers:{'Content-Type':'application/json'}};body=JSON.stringify({uid:uid,token:token});_context5.prev=2;_context5.next=5;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/users/activation/\"),body,config);case 5:dispatch({type:ACTIVATION_SUCCESS});_context5.next=11;break;case 8:_context5.prev=8;_context5.t0=_context5[\"catch\"](2);dispatch({type:ACTIVATION_FAIL});case 11:case\"end\":return _context5.stop();}}},_callee5,null,[[2,8]]);}));return function(_x5){return _ref5.apply(this,arguments);};}();};export var reset_password=function reset_password(email){return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch){var config,body;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:config={headers:{'Content-Type':'application/json'}};body=JSON.stringify({email:email});_context6.prev=2;_context6.next=5;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/users/reset_password/\"),body,config);case 5:dispatch({type:PASSWORD_RESET_SUCCESS});_context6.next=11;break;case 8:_context6.prev=8;_context6.t0=_context6[\"catch\"](2);dispatch({type:PASSWORD_RESET_FAIL});case 11:case\"end\":return _context6.stop();}}},_callee6,null,[[2,8]]);}));return function(_x6){return _ref6.apply(this,arguments);};}();};export var reset_password_confirm=function reset_password_confirm(uid,token,new_password,re_new_password){return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch){var config,body;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:config={headers:{'Content-Type':'application/json'}};body=JSON.stringify({uid:uid,token:token,new_password:new_password,re_new_password:re_new_password});_context7.prev=2;_context7.next=5;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/users/reset_password_confirm/\"),body,config);case 5:dispatch({type:PASSWORD_RESET_CONFIRM_SUCCESS});_context7.next=11;break;case 8:_context7.prev=8;_context7.t0=_context7[\"catch\"](2);dispatch({type:PASSWORD_RESET_CONFIRM_FAIL});case 11:case\"end\":return _context7.stop();}}},_callee7,null,[[2,8]]);}));return function(_x7){return _ref7.apply(this,arguments);};}();};export var logout=function logout(){return function(dispatch){dispatch({type:LOGOUT});};};export var googleAuthenticate=function googleAuthenticate(state,code){return/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(dispatch){var config,details,formBody,res;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:if(!(state&&code&&!localStorage.getItem('access'))){_context8.next=15;break;}config={headers:{'Content-Type':'application/x-www-form-urlencoded'}};details={'state':state,'code':code};formBody=Object.keys(details).map(function(key){return encodeURIComponent(key)+'='+encodeURIComponent(details[key]);}).join('&');_context8.prev=4;_context8.next=7;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/o/google-oauth2/?\").concat(formBody),config);case 7:res=_context8.sent;dispatch({type:GOOGLE_AUTH_SUCCESS,payload:res.data});dispatch(load_user());_context8.next=15;break;case 12:_context8.prev=12;_context8.t0=_context8[\"catch\"](4);dispatch({type:GOOGLE_AUTH_FAIL});case 15:case\"end\":return _context8.stop();}}},_callee8,null,[[4,12]]);}));return function(_x8){return _ref8.apply(this,arguments);};}();};export var facebookAuthenticate=function facebookAuthenticate(state,code){return/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(dispatch){var config,details,formBody,res;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:if(!(state&&code&&!localStorage.getItem('access'))){_context9.next=15;break;}config={headers:{'Content-Type':'application/x-www-form-urlencoded'}};details={'state':state,'code':code};formBody=Object.keys(details).map(function(key){return encodeURIComponent(key)+'='+encodeURIComponent(details[key]);}).join('&');_context9.prev=4;_context9.next=7;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/auth/o/facebook/?\").concat(formBody),config);case 7:res=_context9.sent;dispatch({type:FACEBOOK_AUTH_SUCCESS,payload:res.data});dispatch(load_user());_context9.next=15;break;case 12:_context9.prev=12;_context9.t0=_context9[\"catch\"](4);dispatch({type:FACEBOOK_AUTH_FAIL});case 15:case\"end\":return _context9.stop();}}},_callee9,null,[[4,12]]);}));return function(_x9){return _ref9.apply(this,arguments);};}();};","map":{"version":3,"sources":["/home/supersis03/Projects/dextera-project/frontend/src/actions/auth.js"],"names":["axios","LOGIN_SUCCESS","LOGIN_FAIL","USER_LOADED_SUCCESS","USER_LOADED_FAIL","AUTHENTICATED_SUCCESS","AUTHENTICATED_FAIL","PASSWORD_RESET_SUCCESS","PASSWORD_RESET_FAIL","PASSWORD_RESET_CONFIRM_SUCCESS","PASSWORD_RESET_CONFIRM_FAIL","SIGNUP_SUCCESS","SIGNUP_FAIL","ACTIVATION_SUCCESS","ACTIVATION_FAIL","GOOGLE_AUTH_SUCCESS","GOOGLE_AUTH_FAIL","FACEBOOK_AUTH_SUCCESS","FACEBOOK_AUTH_FAIL","LOGOUT","load_user","dispatch","localStorage","getItem","config","headers","get","process","env","REACT_APP_API_URL","res","console","log","data","type","payload","checkAuthenticated","body","JSON","stringify","token","post","code","login","email","password","signup","first_name","last_name","username","re_password","is_firm","is_client","is_lawyer","verify","uid","reset_password","reset_password_confirm","new_password","re_new_password","logout","googleAuthenticate","state","details","formBody","Object","keys","map","key","encodeURIComponent","join","facebookAuthenticate"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport {\n    LOGIN_SUCCESS,\n    LOGIN_FAIL,\n    USER_LOADED_SUCCESS,\n    USER_LOADED_FAIL,\n    AUTHENTICATED_SUCCESS,\n    AUTHENTICATED_FAIL,\n    PASSWORD_RESET_SUCCESS,\n    PASSWORD_RESET_FAIL,\n    PASSWORD_RESET_CONFIRM_SUCCESS,\n    PASSWORD_RESET_CONFIRM_FAIL,\n    SIGNUP_SUCCESS,\n    SIGNUP_FAIL,\n    ACTIVATION_SUCCESS,\n    ACTIVATION_FAIL,\n    GOOGLE_AUTH_SUCCESS,\n    GOOGLE_AUTH_FAIL,\n    FACEBOOK_AUTH_SUCCESS,\n    FACEBOOK_AUTH_FAIL,\n    LOGOUT,\n    \n} from './types';\n\n\nexport const load_user = () => async dispatch => {\n    if (localStorage.getItem('access')) {\n        const config = {\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${localStorage.getItem('access')}`,\n                'Accept': 'application/json'\n            }\n        }; \n\n        try {\n            const res = await axios.get(`${process.env.REACT_APP_API_URL}/auth/users/me/`, config);\n            console.log('res.data load user :', res.data)\n            dispatch({\n                type: USER_LOADED_SUCCESS,\n                payload: res.data\n            });\n            \n        } catch (err) {\n            dispatch({\n                type: USER_LOADED_FAIL\n            });\n        }\n    } else {\n        dispatch({\n            type: USER_LOADED_FAIL\n        });\n    }\n};\n\nexport const checkAuthenticated = () => async dispatch => {\n    if (localStorage.getItem('access')) {\n        const config = {\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json'\n            }\n        }; \n\n        const body = JSON.stringify({ token: localStorage.getItem('access') });\n\n        try {\n            const res = await axios.post(`${process.env.REACT_APP_API_URL}/auth/jwt/verify/`, body, config)\n\n            if (res.data.code !== 'token_not_valid') {\n                dispatch({\n                    type: AUTHENTICATED_SUCCESS\n                });\n            } else {\n                dispatch({\n                    type: AUTHENTICATED_FAIL\n                });\n            }\n        } catch (err) {\n            dispatch({\n                type: AUTHENTICATED_FAIL\n            });\n        }\n\n    } else {\n        dispatch({\n            type: AUTHENTICATED_FAIL\n        });\n    }\n};\n\nexport const login = ( email, password) => async dispatch => {\n    const config = {\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    };\n\n    const body = JSON.stringify({ email, password });\n\n    try {\n        const res = await axios.post(`${process.env.REACT_APP_API_URL}/auth/jwt/create/`, body, config);\n        \n\n        dispatch({\n            type: LOGIN_SUCCESS,\n            payload: res.data\n        });\n        dispatch(load_user());\n    } catch (err) {\n        dispatch({\n            type: LOGIN_FAIL\n        })\n    }\n};\n\n\n\nexport const signup = ( email, first_name, last_name, username, password, re_password, is_firm, is_client) => async dispatch => {\n    const is_lawyer = false\n    const config = {\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    };\n\n    const body = JSON.stringify({ email, first_name, last_name, username, password, re_password, is_firm, is_lawyer, is_client});\n    \n    \n    try {\n        const res = await axios.post(`${process.env.REACT_APP_API_URL}/auth/users/`, body, config);\n        dispatch({\n            type: SIGNUP_SUCCESS,\n            payload: res.data \n        });\n        \n\n    } catch (err) {\n        dispatch({\n            type: SIGNUP_FAIL\n        })\n    }\n};\n\nexport const verify = (uid, token) => async dispatch => {\n    const config = {\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    };\n\n    const body = JSON.stringify({ uid, token });\n\n    try {\n        await axios.post(`${process.env.REACT_APP_API_URL}/auth/users/activation/`, body, config);\n\n        dispatch({\n            type: ACTIVATION_SUCCESS,\n        });\n    } catch (err) {\n        dispatch({\n            type: ACTIVATION_FAIL\n        })\n    }\n};\n\nexport const reset_password = (email) => async dispatch => {\n    const config = {\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    };\n\n    const body = JSON.stringify({ email });\n\n    try {\n        await axios.post(`${process.env.REACT_APP_API_URL}/auth/users/reset_password/`, body, config);\n\n        dispatch({\n            type: PASSWORD_RESET_SUCCESS\n        });\n    } catch (err) {\n        dispatch({\n            type: PASSWORD_RESET_FAIL\n        });\n    }\n};\n\nexport const reset_password_confirm = (uid, token, new_password, re_new_password) => async dispatch => {\n    const config = {\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    };\n\n    const body = JSON.stringify({ uid, token, new_password, re_new_password });\n\n    try {\n        await axios.post(`${process.env.REACT_APP_API_URL}/auth/users/reset_password_confirm/`, body, config);\n\n        dispatch({\n            type: PASSWORD_RESET_CONFIRM_SUCCESS\n        });\n    } catch (err) {\n        dispatch({\n            type: PASSWORD_RESET_CONFIRM_FAIL\n        });\n    }\n};\n\nexport const logout = () => dispatch => {\n    dispatch({\n        type: LOGOUT\n    });\n};\n\n\n\nexport const googleAuthenticate = (state, code) => async dispatch => {\n    if (state && code && !localStorage.getItem('access')) {\n        const config = {\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded'\n            }\n        };\n\n        const details = {\n            'state': state,\n            'code': code\n        };\n\n        const formBody = Object.keys(details).map(key => encodeURIComponent(key) + '=' + encodeURIComponent(details[key])).join('&');\n\n        try {\n            const res = await axios.post(`${process.env.REACT_APP_API_URL}/auth/o/google-oauth2/?${formBody}`, config);\n\n            dispatch({\n                type: GOOGLE_AUTH_SUCCESS,\n                payload: res.data\n            });\n\n            dispatch(load_user());\n        } catch (err) {\n            dispatch({\n                type: GOOGLE_AUTH_FAIL\n            });\n        }\n    }\n};\n\nexport const facebookAuthenticate = (state, code) => async dispatch => {\n    if (state && code && !localStorage.getItem('access')) {\n        const config = {\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded'\n            }\n        };\n\n        const details = {\n            'state': state,\n            'code': code\n        };\n\n        const formBody = Object.keys(details).map(key => encodeURIComponent(key) + '=' + encodeURIComponent(details[key])).join('&');\n\n        try {\n            const res = await axios.post(`${process.env.REACT_APP_API_URL}/auth/o/facebook/?${formBody}`, config);\n\n            dispatch({\n                type: FACEBOOK_AUTH_SUCCESS,\n                payload: res.data\n            });\n\n            dispatch(load_user());\n        } catch (err) {\n            dispatch({\n                type: FACEBOOK_AUTH_FAIL\n            });\n        }\n    }\n};\n"]},"metadata":{},"sourceType":"module"}